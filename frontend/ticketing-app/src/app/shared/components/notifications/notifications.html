<div class="notifications-container">
  <!-- Botón de campana con badge -->
  <button class="notifications-bell" (click)="toggleDropdown()" type="button">
    <i class="fas fa-bell"></i>
    <span class="badge" *ngIf="unreadCount > 0">{{ unreadCount > 99 ? '99+' : unreadCount }}</span>
  </button>

  <!-- Dropdown de notificaciones -->
  <div class="notifications-dropdown" *ngIf="isOpen">
    <!-- Header -->
    <div class="dropdown-header">
      <h3>Notificaciones</h3>
      <button class="mark-all-read" (click)="markAllAsRead()" *ngIf="unreadCount > 0">
        Marcar todas como leídas
      </button>
    </div>

    <!-- Loading -->
    <div class="loading" *ngIf="loading">
      <i class="fas fa-spinner fa-spin"></i> Cargando...
    </div>

    <!-- Lista de notificaciones -->
    <div class="notifications-list" *ngIf="!loading">
      <div *ngIf="notifications.length === 0" class="empty-state">
        <i class="fas fa-bell-slash"></i>
        <p>No tienes notificaciones</p>
      </div>

      <div 
        *ngFor="let notification of notifications" 
        class="notification-item"
        [class.unread]="!notification.isRead"
        [ngClass]="getNotificationClass(notification.notificationType)"
        (click)="markAsRead(notification)"
      >
        <!-- Icono de categoría -->
        <div class="notification-icon">
          <span>{{ getCategoryIcon(notification.category) }}</span>
        </div>

        <!-- Contenido -->
        <div class="notification-content">
          <div class="notification-header">
            <h4>{{ notification.title }}</h4>
            <span class="notification-time">{{ getTimeAgo(notification.createdAt) }}</span>
          </div>
          <p class="notification-message">{{ notification.message }}</p>
          
          <!-- Badge de tipo -->
          <span class="notification-type-badge" [ngClass]="getNotificationClass(notification.notificationType)">
            {{ getNotificationIcon(notification.notificationType) }} {{ notification.notificationType }}
          </span>
        </div>

        <!-- Botón de eliminar -->
        <button class="delete-btn" (click)="deleteNotification(notification, $event)" title="Eliminar">
          <i class="fas fa-times"></i>
        </button>

        <!-- Indicador de no leída -->
        <div class="unread-indicator" *ngIf="!notification.isRead"></div>
      </div>
    </div>

    <!-- Footer -->
    <div class="dropdown-footer">
      <a href="/notifications" class="view-all">Ver todas las notificaciones</a>
    </div>
  </div>

  <!-- Overlay para cerrar el dropdown -->
  <div class="dropdown-overlay" *ngIf="isOpen" (click)="toggleDropdown()"></div>
</div>
