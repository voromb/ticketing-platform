<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Header del Perfil -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
      <div class="flex items-center space-x-4">
        <!-- Avatar -->
        <div
          class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center text-xl font-semibold text-gray-600">
          {{ getUserInitials() }}
        </div>

        <!-- Info del Usuario -->
        <div class="flex-1">
          <div class="flex items-center space-x-3">
            <h1 class="text-2xl font-bold text-gray-900">
              {{ user?.firstName || user?.email }}
            </h1>

            <!-- Corona VIP -->
            @if (isVipUser()) {
            <i class="fas fa-crown text-yellow-500 text-lg" title="Usuario VIP"></i>
            }
            <!-- Indicador de panel de usuario  -->
            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">Panel de usuario</span>
          </div>
          <p class="text-gray-600">{{ user?.email }}</p>
          <div class="mt-2">
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
              [ngClass]="getRoleBadgeClass()">
              @if (isVipUser()) {
              <i class="fas fa-crown mr-1"></i>
              }
              {{ getRoleDisplayName() }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Navegaci칩n por Tabs -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
      <div class="border-b border-gray-200">
        <nav class="flex space-x-12 px-6" aria-label="Tabs">
          <button (click)="setActiveTab('profile')"
            [class]="activeTab === 'profile' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
            class="whitespace-nowrap py-6 px-4 border-b-2 font-medium text-base">
            <i class="fas fa-user mr-3"></i>Mi Perfil
          </button>

          @if (isVipUser()) {
          <button (click)="setActiveTab('reservations')"
            [class]="activeTab === 'reservations' ? 'border-yellow-500 text-yellow-600' : 'border-transparent text-yellow-500 hover:text-yellow-600 hover:border-yellow-300'"
            class="whitespace-nowrap py-6 px-4 border-b-2 font-medium text-base">
            <i class="fas fa-bookmark mr-3"></i>Mis Reservas VIP
          </button>
          }

          <button (click)="setActiveTab('tickets')"
            [class]="activeTab === 'tickets' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
            class="whitespace-nowrap py-6 px-4 border-b-2 font-medium text-base">
            <i class="fas fa-ticket-alt mr-3"></i>Mis Entradas
          </button>

          <button (click)="setActiveTab('history')"
            [class]="activeTab === 'history' ? 'border-blue-500 text-blue-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
            class="whitespace-nowrap py-6 px-4 border-b-2 font-medium text-base">
            <i class="fas fa-history mr-3"></i>Historial
          </button>

          <button (click)="setActiveTab('liked-events')"
            [class]="activeTab === 'liked-events' ? 'border-red-500 text-red-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
            class="whitespace-nowrap py-6 px-4 border-b-2 font-medium text-base">
            <i class="fas fa-heart mr-3"></i>Mis Likes
          </button>

          @if (!isVipUser()) {
          <button (click)="setActiveTab('vip')"
            [class]="activeTab === 'vip' ? 'border-yellow-500 text-yellow-600' : 'border-transparent text-yellow-500 hover:text-yellow-600 hover:border-yellow-300'"
            class="whitespace-nowrap py-6 px-4 border-b-2 font-medium text-base">
            <i class="fas fa-crown mr-3"></i>Beneficios VIP
          </button>
          }
        </nav>
      </div>

      <!-- Contenido de las Tabs -->
      <div class="p-6">

        <!-- Tab: Mi Perfil -->
        @if (activeTab === 'profile') {
        <div>
          <h2 class="text-lg font-semibold text-gray-900 mb-4">Informaci칩n Personal</h2>
          <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Nombre -->
              <div>
                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">Nombre</label>
                <input type="text" id="firstName" [value]="user?.firstName" readonly
                  class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500">
              </div>

              <!-- Email (solo lectura) -->
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                <input type="email" id="email" [value]="user?.email" readonly
                  class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500">
                <p class="text-xs text-gray-500 mt-1">El email no se puede modificar</p>
              </div>
              <!-- Tel칠fono -->
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Tel칠fono</label>
                <input type="tel" id="phone" formControlName="phone"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="+34 600 000 000">
              </div>

              <!-- Ciudad -->
              <div>
                <label for="city" class="block text-sm font-medium text-gray-700 mb-2">Ciudad</label>
                <input type="text" id="city" formControlName="city"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                  placeholder="Tu ciudad">
              </div>

              <!-- Pa칤s -->
              <div>
                <label for="country" class="block text-sm font-medium text-gray-700 mb-2">Pa칤s</label>
                <select id="country" formControlName="country"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  <option value="Espa침a">Espa침a</option>
                  <option value="Francia">Francia</option>
                  <option value="Portugal">Portugal</option>
                  <option value="Italia">Italia</option>
                  <option value="Otro">Otro</option>
                </select>
              </div>
            </div>

            <!-- Direcci칩n completa -->
            <div class="mt-6">
              <label for="address" class="block text-sm font-medium text-gray-700 mb-2">Direcci칩n</label>
              <input type="text" id="address" formControlName="address"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="Calle, n칰mero, piso...">
            </div>

            <!-- Fecha de nacimiento -->
            <div class="mt-6">
              <label for="dateOfBirth" class="block text-sm font-medium text-gray-700 mb-2">Fecha de Nacimiento</label>
              <input type="date" id="dateOfBirth" formControlName="dateOfBirth"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent md:w-auto">
            </div>

            <!-- Botones -->
            <div class="mt-8 flex justify-between">
              <button type="button" (click)="togglePasswordForm()"
                class="px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500">
                <i class="fas fa-key mr-2"></i>Cambiar Contrase침a
              </button>

              <button type="submit" [disabled]="loading"
                class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50">
                <i *ngIf="!loading" class="fas fa-save mr-2"></i>
                <i *ngIf="loading" class="fas fa-spinner fa-spin mr-2"></i>
                {{ loading ? 'Guardando...' : 'Guardar Cambios' }}
              </button>
            </div>
          </form>

          <!-- Formulario de Cambio de Contrase침a -->
          @if (showPasswordForm) {
          <div class="mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Cambiar Contrase침a</h3>

            <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePassword()">
              <div class="space-y-4">
                <!-- Contrase침a actual -->
                <div>
                  <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-2">Contrase침a Actual
                    *</label>
                  <input type="password" id="currentPassword" formControlName="currentPassword"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Tu contrase침a actual">
                  <div
                    *ngIf="changePasswordForm.get('currentPassword')?.invalid && changePasswordForm.get('currentPassword')?.touched"
                    class="text-red-600 text-sm mt-1">
                    La contrase침a actual es requerida
                  </div>
                </div>

                <!-- Nueva contrase침a -->
                <div>
                  <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-2">Nueva Contrase침a
                    *</label>
                  <input type="password" id="newPassword" formControlName="newPassword"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="M칤nimo 6 caracteres">
                  <div
                    *ngIf="changePasswordForm.get('newPassword')?.invalid && changePasswordForm.get('newPassword')?.touched"
                    class="text-red-600 text-sm mt-1">
                    M칤nimo 6 caracteres
                  </div>
                </div>

                <!-- Confirmar contrase침a -->
                <div>
                  <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2">Confirmar Nueva
                    Contrase침a *</label>
                  <input type="password" id="confirmPassword" formControlName="confirmPassword"
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Repite la nueva contrase침a">
                  <div
                    *ngIf="changePasswordForm.get('confirmPassword')?.hasError('passwordMismatch') && changePasswordForm.get('confirmPassword')?.touched"
                    class="text-red-600 text-sm mt-1">
                    Las contrase침as no coinciden
                  </div>
                </div>
              </div>

              <div class="mt-6 flex justify-end space-x-3">
                <button type="button" (click)="togglePasswordForm()"
                  class="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500">
                  Cancelar
                </button>

                <button type="submit" [disabled]="loading || changePasswordForm.invalid"
                  class="px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50">
                  <i *ngIf="!loading" class="fas fa-key mr-2"></i>
                  <i *ngIf="loading" class="fas fa-spinner fa-spin mr-2"></i>
                  {{ loading ? 'Cambiando...' : 'Cambiar Contrase침a' }}
                </button>
              </div>
            </form>
          </div>
          }
        </div>
      }

          <!-- Tab: Mis Reservas VIP -->
          @if (activeTab === 'reservations' && isVipUser()) {
          <div>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">
              <i class="fas fa-bookmark text-yellow-500 mr-2"></i>Mis Reservas VIP
            </h2>

            @for (reservation of myReservations; track reservation.id) {
            @if (reservation && reservation.status === 'ACTIVE') {
            <div class="bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4 mb-4">
              <div class="flex gap-2">
                <button (click)="cancelReservation(reservation.id)"
                  class="flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
                  <i class="fas fa-times mr-2"></i>Cancelar Reserva
                </button>
                <button (click)="purchaseReservation(reservation)"
                  class="flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700">
                  <i class="fas fa-shopping-cart mr-2"></i>Comprar Ahora
                </button>
              </div>
            </div>
            }
            }
          </div>
          }

          <!-- Tab: Mis Entradas -->
          @if (activeTab === 'tickets') {
          <div>
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-900">Mis Entradas</h2>
              <button (click)="refreshData()"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm">
                <i class="fas fa-sync-alt mr-2"></i>Actualizar
              </button>
            </div>

            @if (loadingOrders) {
            <div class="text-center py-8">
              <i class="fas fa-spinner fa-spin text-gray-400 text-4xl mb-4"></i>
              <p class="text-gray-500">Cargando entradas...</p>
            </div>
            }

            @if (!loadingOrders && myTickets.length === 0) {
            <div class="text-center py-8">
              <i class="fas fa-ticket-alt text-gray-400 text-4xl mb-4"></i>
              <p class="text-gray-500">No tienes entradas compradas</p>
              <p class="text-gray-400 text-sm mt-2">Total de 칩rdenes: {{myOrders.length}}</p>
              <p class="text-gray-400 text-sm">칍rdenes completadas: {{getCompletedOrdersCount()}}</p>
            </div>
            }

            @if (myTickets.length > 0) {
            <div class="space-y-4">
              @for (ticket of myTickets; track ticket.ticketCode) {
              <div class="bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                <div class="flex justify-between items-start mb-4">
                  <div class="flex-1">
                    <h3 class="font-semibold text-gray-900 text-lg mb-2">{{ ticket.eventName }}</h3>
                    <div class="space-y-1">
                      <p class="text-gray-600 text-sm">
                        <i class="fas fa-map-marker-alt mr-2 text-gray-400"></i>{{ ticket.localityName }}
                      </p>
                      <p class="text-gray-600 text-sm">
                        <i class="fas fa-calendar mr-2 text-gray-400"></i>{{ ticket.eventDate | date:'dd/MM/yyyy HH:mm'
                        }}
                      </p>
                      <p class="text-gray-600 text-sm">
                        <i class="fas fa-barcode mr-2 text-gray-400"></i>{{ ticket.ticketCode }}
                      </p>
                    </div>
                  </div>
                  <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"
                    [ngClass]="ticket.status === 'VALID' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'">
                    <i class="fas fa-check-circle mr-1"></i>{{ ticket.status }}
                  </span>
                </div>

                <!-- QR Code Section -->
                <div class="border-t pt-4 mt-4">
                  <div class="flex items-center justify-between">
                    <div class="text-sm text-gray-500">
                      <i class="fas fa-qrcode mr-2"></i>C칩digo QR: {{ ticket.qrCode }}
                    </div>
                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                      <i class="fas fa-download mr-1"></i>Descargar
                    </button>
                  </div>
                </div>
              </div>
              }
            </div>
            }
          </div>
          }

          <!-- Tab: Historial -->
          @if (activeTab === 'history') {
          <div>
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Historial de Compras</h2>

            @if (myOrders.length === 0) {
            <div class="text-center py-8">
              <i class="fas fa-history text-gray-400 text-4xl mb-4"></i>
              <p class="text-gray-500">No tienes compras anteriores</p>
            </div>
            }

            @if (myOrders.length > 0) {
            <div class="space-y-4">
              @for (order of myOrders; track order.id) {
              <div class="bg-white border border-gray-200 rounded-lg p-6">
                <div class="flex justify-between items-start mb-3">
                  <div class="flex-1">
                    <h3 class="font-semibold text-gray-900 text-lg">
                      {{ order.eventName || order.event?.name || 'Evento' }}
                      @if (order.orderType === 'PACKAGE') {
                        <span class="ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Paquete Completo</span>
                      }
                    </h3>
                    <div class="space-y-1 mt-2">
                      <p class="text-gray-600 text-sm">
                        <i class="fas fa-calendar mr-2 text-gray-400"></i>{{ order.createdAt | date:'dd/MM/yyyy HH:mm' }}
                      </p>
                      
                      <!-- Desglose para 칩rdenes de solo tickets -->
                      @if (order.orderType === 'TICKET_ONLY') {
                        <p class="text-gray-600 text-sm">
                          <i class="fas fa-ticket-alt mr-2 text-gray-400"></i>{{ order.quantity }} entrada(s)
                        </p>
                        <p class="text-gray-600 text-sm">
                          <i class="fas fa-map-marker-alt mr-2 text-gray-400"></i>{{ order.locality?.name || 'General' }}
                        </p>
                      }
                      
                      <!-- Desglose para 칩rdenes de paquetes -->
                      @if (order.orderType === 'PACKAGE') {
                        <div class="bg-gray-50 rounded-lg p-3 mt-3 space-y-2">
                          <p class="text-xs font-semibold text-gray-700 mb-2">游닍 Contenido del paquete:</p>
                          
                          <!-- Tickets -->
                          <div class="flex justify-between text-sm">
                            <span class="text-gray-600">
                              <i class="fas fa-ticket-alt mr-2 text-blue-500"></i>{{ order.ticketQuantity }} Entrada(s)
                            </span>
                            <span class="font-medium text-gray-900">{{ order.ticketTotal | currency:'EUR':'symbol':'1.2-2' }}</span>
                          </div>
                          
                          <!-- Viaje -->
                          @if (order.tripName) {
                            <div class="flex justify-between text-sm">
                              <span class="text-gray-600">
                                <i class="fas fa-bus mr-2 text-green-500"></i>{{ order.tripName }}
                              </span>
                              <span class="font-medium text-gray-900">{{ order.tripPrice | currency:'EUR':'symbol':'1.2-2' }}</span>
                            </div>
                          }
                          
                          <!-- Restaurante -->
                          @if (order.restaurantName) {
                            <div class="flex justify-between text-sm">
                              <span class="text-gray-600">
                                <i class="fas fa-utensils mr-2 text-orange-500"></i>{{ order.restaurantName }} ({{ order.numberOfPeople }} personas)
                              </span>
                              <span class="font-medium text-gray-900">{{ order.restaurantPrice | currency:'EUR':'symbol':'1.2-2' }}</span>
                            </div>
                          }
                          
                          <!-- Merchandising -->
                          @if (order.merchandising && order.merchandising.length > 0) {
                            <div class="border-t pt-2 mt-2">
                              <p class="text-xs font-semibold text-gray-700 mb-1">
                                <i class="fas fa-shopping-bag mr-1 text-purple-500"></i>Merchandising:
                              </p>
                              @for (item of order.merchandising; track item.productId) {
                                <div class="flex justify-between text-sm pl-4">
                                  <span class="text-gray-600">{{ item.productName }} x{{ item.quantity }}</span>
                                  <span class="font-medium text-gray-900">{{ item.total | currency:'EUR':'symbol':'1.2-2' }}</span>
                                </div>
                              }
                            </div>
                          }
                          
                          <!-- Total -->
                          <div class="border-t pt-2 mt-2 flex justify-between font-bold">
                            <span class="text-gray-900">TOTAL</span>
                            <span class="text-gray-900">{{ order.total | currency:'EUR':'symbol':'1.2-2' }}</span>
                          </div>
                        </div>
                      }
                    </div>
                  </div>
                  <div class="text-right">
                    <p class="font-bold text-gray-900 text-xl mb-2">
                      {{ (order.total || order.finalAmount) | currency:'EUR':'symbol':'1.2-2' }}
                    </p>
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"
                      [ngClass]="(order.status === 'PAID' || order.status === 'COMPLETED') ? 'bg-green-100 text-green-800' : order.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'">
                      {{ order.status }}
                    </span>
                    @if (order.discount && order.discount > 0) {
                    <p class="text-green-600 text-sm mt-2">
                      <i class="fas fa-tag mr-1"></i>Descuento: -{{ order.discount | currency:'EUR':'symbol':'1.2-2' }}
                    </p>
                    }
                  </div>
                </div>

                <!-- Tickets generados (solo para 칩rdenes de tickets) -->
                @if (order.orderType === 'TICKET_ONLY' && (order.status === 'PAID' || order.status === 'COMPLETED') && order.tickets && order.tickets.length > 0) {
                <div class="border-t pt-3 mt-3">
                  <p class="text-sm text-gray-500 mb-2">
                    <i class="fas fa-check-circle text-green-600 mr-1"></i>
                    {{ order.tickets.length }} ticket(s) generado(s)
                  </p>
                </div>
                }
              </div>
              }
            </div>
            }
          </div>
        }

        <!-- Tab: Mis Likes -->
        @if (activeTab === 'liked-events') {
          <div>
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-900">
                <i class="fas fa-heart text-red-500 mr-2"></i>Mis Eventos Favoritos
              </h2>
              <button (click)="refreshLikedEvents()" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm">
                <i class="fas fa-sync-alt mr-2"></i>Actualizar
              </button>
            </div>

            @if (loadingLikedEvents) {
              <div class="text-center py-8">
                <i class="fas fa-spinner fa-spin text-gray-400 text-4xl mb-4"></i>
                <p class="text-gray-500">Cargando eventos favoritos...</p>
              </div>
            }

            @if (!loadingLikedEvents && likedEvents.length === 0) {
              <div class="text-center py-8">
                <i class="fas fa-heart text-gray-400 text-4xl mb-4"></i>
                <p class="text-gray-500">No tienes eventos favoritos</p>
                <p class="text-gray-400 text-sm mt-2">Da like a los eventos que te gusten para verlos aqu칤</p>
              </div>
            }

            @if (!loadingLikedEvents && likedEvents.length > 0) {
              <div class="space-y-4">
                @for (event of likedEvents; track event.id) {
                  <div class="bg-white border rounded-lg p-6 transition-shadow" 
                       [class]="event.isDeleted ? 'border-red-200 bg-red-50' : 'border-gray-200 hover:shadow-md'">
                    <div class="flex gap-4">
                      <!-- Imagen del evento -->
                      <div class="flex-shrink-0">
                        @if (event.isDeleted) {
                          <div class="w-24 h-24 bg-red-200 rounded-lg flex items-center justify-center">
                            <i class="fas fa-exclamation-triangle text-red-500 text-2xl"></i>
                          </div>
                        } @else if (event.bannerImage || event.thumbnailImage) {
                          <img 
                            [src]="event.bannerImage || event.thumbnailImage" 
                            [alt]="event.name"
                            class="w-24 h-24 object-cover rounded-lg">
                        } @else {
                          <div class="w-24 h-24 bg-gray-200 rounded-lg flex items-center justify-center">
                            <i class="fas fa-calendar-alt text-gray-400 text-2xl"></i>
                          </div>
                        }
                      </div>

                      <!-- Informaci칩n del evento -->
                      <div class="flex-1">
                        <h3 class="font-semibold text-lg mb-2" 
                            [class]="event.isDeleted ? 'text-red-700' : 'text-gray-900'">
                          {{ event.name }}
                        </h3>
                        <p class="text-sm mb-2 line-clamp-2" 
                           [class]="event.isDeleted ? 'text-red-600' : 'text-gray-600'">
                          {{ event.description }}
                        </p>
                        
                        <div class="space-y-1">
                          <p class="text-sm" [class]="event.isDeleted ? 'text-red-500' : 'text-gray-600'">
                            <i class="fas fa-map-marker-alt mr-2" 
                               [class]="event.isDeleted ? 'text-red-400' : 'text-gray-400'"></i>
                            {{ event.venue.name }}, {{ event.venue.city }}, {{ event.venue.country }}
                          </p>
                          @if (!event.isDeleted && event.eventDate) {
                            <p class="text-gray-600 text-sm">
                              <i class="fas fa-calendar mr-2 text-gray-400"></i>
                              {{ event.eventDate | date:'dd/MM/yyyy HH:mm' }}
                            </p>
                          }
                          <p class="text-sm" [class]="event.isDeleted ? 'text-red-500' : 'text-gray-600'">
                            <i class="fas fa-tag mr-2" 
                               [class]="event.isDeleted ? 'text-red-400' : 'text-gray-400'"></i>
                            {{ event.category.name }}
                          </p>
                          <p class="text-gray-600 text-sm">
                            <i class="fas fa-heart mr-2 text-red-400"></i>
                            Like dado el {{ event.likedAt | date:'dd/MM/yyyy' }}
                          </p>
                        </div>
                      </div>

                      <!-- Acciones -->
                      <div class="flex-shrink-0 flex flex-col gap-2">
                        @if (!event.isDeleted) {
                          <button 
                            (click)="goToEvent(event.slug)"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                            <i class="fas fa-eye mr-1"></i>Ver Evento
                          </button>
                        }
                        <button 
                          (click)="removeLike(event.id)"
                          class="px-4 py-2 bg-red-100 text-red-600 rounded-md hover:bg-red-200 text-sm">
                          <i class="fas fa-heart-broken mr-1"></i>
                          {{ event.isDeleted ? 'Limpiar' : 'Quitar Like' }}
                        </button>
                      </div>
                    </div>
                  </div>
                }
              </div>

              @if (hasMoreLikedEvents) {
                <div class="mt-6 text-center">
                  <button 
                    (click)="loadMoreLikedEvents()"
                    [disabled]="loadingLikedEvents"
                    class="px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:opacity-50">
                    <i class="fas fa-plus mr-2"></i>
                    {{ loadingLikedEvents ? 'Cargando...' : 'Cargar m치s eventos' }}
                  </button>
                </div>
              }
            }
          </div>
        }

        <!-- Tab: Beneficios VIP (solo para usuarios NO VIP) -->
          @if (activeTab === 'vip' && !isVipUser()) {
          <div>
            <div class="bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg p-6 border border-yellow-200">
              <div class="flex items-center mb-4">
                <i class="fas fa-crown text-yellow-500 text-2xl mr-3"></i>
                <h2 class="text-xl font-bold text-gray-900">Beneficios VIP</h2>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white rounded-lg p-4 border border-yellow-200">
                  <div class="flex items-center mb-2">
                    <i class="fas fa-percentage text-yellow-500 mr-2"></i>
                    <h3 class="font-semibold text-gray-900">Descuento Exclusivo</h3>
                  </div>
                  <p class="text-gray-600 text-sm">10% de descuento en todas las entradas</p>
                </div>

                <div class="bg-white rounded-lg p-4 border border-yellow-200">
                  <div class="flex items-center mb-2">
                    <i class="fas fa-fast-forward text-yellow-500 mr-2"></i>
                    <h3 class="font-semibold text-gray-900">Acceso Prioritario</h3>
                  </div>
                  <p class="text-gray-600 text-sm">Compra antes que el p칰blico general</p>
                </div>

                <div class="bg-white rounded-lg p-4 border border-yellow-200">
                  <div class="flex items-center mb-2">
                    <i class="fas fa-star text-yellow-500 mr-2"></i>
                    <h3 class="font-semibold text-gray-900">Ofertas Exclusivas</h3>
                  </div>
                  <p class="text-gray-600 text-sm">Promociones especiales solo para VIP</p>
                </div>

                <div class="bg-white rounded-lg p-4 border border-yellow-200">
                  <div class="flex items-center mb-2">
                    <i class="fas fa-headset text-yellow-500 mr-2"></i>
                    <h3 class="font-semibold text-gray-900">Soporte Premium</h3>
                  </div>
                  <p class="text-gray-600 text-sm">Atenci칩n al cliente prioritaria</p>
                </div>
              </div>

              <div class="mt-6 text-center">
                <button (click)="goToVipInfo()"
                  class="px-6 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500">
                  <i class="fas fa-info-circle mr-2"></i>M치s Informaci칩n
                </button>
              </div>
            </div>
          </div>
          }

          <!-- Componente de estad칤sticas sociales -->
          <app-user-social-stats [userId]="user.id" [showFollowButton]="!isOwnProfile">
          </app-user-social-stats>

        </div>
      </div>
    </div>
  </div>